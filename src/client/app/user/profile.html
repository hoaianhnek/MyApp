<div id="profile-view" class="dating-full-width mainbar">
  <div class="container db-social">
    <div class="jumbotron jumbotron-fluid" style="background:url('{{vm.detail.CoverImage}}')">
    </div>
    <div class="profile-menu-area bg-white">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-3 col-md-3">
            <div class="profile-picture-box">
              <figure class="profile-picture">
                <a>
                  <img src="{{vm.detail.Avatar}}" style="width: 220px;height: 235px;">
                </a>
              </figure>
            </div>
          </div>
          <div class="col-lg-6 col-md-6">
            <div class="profile-menu-wrapper">
              <div class="main-menu-inner header-top-navigation">
                <nav>
                  <ul class="main-menu">
                    <li class="active" >
                      <a data-toggle="tab" href = "#post">Bài đăng</a>
                    </li>
                    <li>
                      <a href="#images" data-toggle="tab">Hình Ảnh</a>
                    </li>
                    <li>
                      <a href="#friends" data-toggle="tab">Bạn bè</a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-md-3 d-none d-md-block">
            <div class="profile-edit-panel"ng-show="{{vm.id == vm.currentUser.Id}}">
              <button class="edit-btn" ng-click="vm.OpenEditProfile()">
                chỉnh sửa trang cá nhân
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container tab-content">
      <div id="post" class="tab-pane active">
        <div class="row">
          <div class="col-lg-3 order-2 order-lg-1" style="padding: 5px;padding-right: 15px;
          margin: 0px;">
            <aside class="widget-area profile-sidebar">
              <div class="card widget-item">
                <h4 class="widget-title">
                  Giới thiệu
                </h4>
                <div class="widget-body">
                  <!-- <h3>{{vm.currentUser.UserName}}</h3> -->
                  <h3 class="about-author">
                    <p>{{vm.detail.About}}</p>
                    <ul class="author-into-list">
                      <li>
                        <i class="fa fa-users"></i> {{vm.detail.UserName}}
                      </li>
                      <li>
                        <i class="fa fa-mobile mr-3"></i> {{vm.detail.MobilePhone}}
                      </li>
                      <li>
                        <i class="fa fa-map"></i> Phú Nhuận, HCM
                      </li>
                    </ul>
                  </h3>
                </div>
              </div>
            </aside>
          </div>
          <div class="col-lg-6 order-1 order-lg-2">
            <!-- share box start -->
            <div class="card card-small">
              <div class="share-box-inner">
                <!-- profile-picture -->
                <div class="profile-thumb">
                  <a href="">
                    <figure class="profile-thumb-middle">
                      <img src="{{vm.detail.Avatar}}" style="width: 45px;height: 45px;">
                    </figure>
                  </a>
                </div>
                <!-- share content box start -->
                <div class="share-content-box w-100" >
                  <form action="" class="share-text-box">
                    <textarea name="share" class="share-text-field" placeholder="Hôm nay bạn thế nào?" ng-click="vm.OpenPost()"></textarea>
                  </form>
                </div>
              </div>
            </div>
            <div class="card widget-item" ng-repeat="post in vm.posts track by $index">
              <div class="post-title d-flex align-items-center">
                <div class="profile-thumb">
                  <a href="~/profile">
                    <figure class="profile-thumb-middle">
                      <img src="{{vm.currentUser.Avatar}}">
                    </figure>
                  </a>
                </div>
                <div class="posted-author">
                  <h6 class="author">
                    <a href="~/profile">{{vm.currentUser.UserName}}</a>
                  </h6>
                  <span class="post-time" title="{{post.UploadDate | date:'dd-MM-yyyy h:mma'}}">{{post.UploadDate | date:'dd-MM'}}</span>
                </div>
                <div class="post-settings-bar">
                  <span></span>
                  <span></span>
                  <span></span>
                  <div class="post-settings arrow-shape">
                    <ul>
                      <li>
                        <button>Xóa bài đăng</button>
                      </li>
                      <li>
                        <button>Sửa bài đăng</button>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="post-content">
                <p class="post-desc">
                  {{post.Description}}
                </p>
                <div class="post-thumb-gallery img-gallery">
                  <a href="" class="gallery-selector d-flex" style="position: relative;">
                    <img src="{{post.ImagePath[0]}}" alt="post image">
                    <div ng-show="post.ImagePath.length > 1" style="position:absolute;
                    right:0;left:0;top:0;bottom:0;background:black;opacity:0.2">
                    </div>
                    <div ng-show="post.ImagePath.length > 1" style="
                    position:absolute; line-height:240px;text-align:center;width:100%;
                    font-size:25px;font-weight:700;color:white" ng-click="vm.OpenSlide(post.Id)">+ {{post.ImagePath.length-1}}</div>
                  </a>
                  <!-- <a href="" class="gallery-selector" ng-show="post.ImagePath.Length > 1">
                    <i >
                  </a> -->
                </div>
              </div>
              <div class="post-meta">
                <button class="post-meta-like">
                  <i class="fa fa-heartbeat"></i>
                  <span>Bạn và 1 người khác đã thích</span>
                </button>
                <ul class="comment-share-meta">
                  <li>
                    <button class="post-comment">
                      <i class="fa fa-comments-o"></i>
                      <span>41</span>
                    </button>
                  </li>
                  <li>
                    <button class="post-comment">
                      <i class="fa fa-share"></i>
                      <span>41</span>
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-lg-3 order-3" style="padding-right: 0px;">
            <aside class="widget-area">
              <div class="card widget-item">
                <h4 class="widget-title">
                  Thông báo gần đây
                </h4>
                <div class="widget-body">
                  <ul class="notify-recent">
                    <div ng-show="vm.notifieds == null">Không có thông báo nào</div>
                    <li class="unorder-list" ng-repeat="notify in vm.notifieds track by $index">
                      <!-- <div class="profile-thumb">
                        <a href="">
                          <figure class="profile-thumb-small">
                            <img src="../images/linh.jpg" alt="profile picture">
                          </figure>
                        </a>
                      </div> -->
                      <div class="unorder-list-info">
                        <h4 class="list-title">
                          {{notify.Title}}
                        </h4>
                        <p class="list-subtitle" title="{{notify.CreatedTime | date:'dd-MM-yyyy lúc h:mma'}}">
                          {{notify.CreatedTime | date:"dd-MM"}}
                        </p>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </div>
      <div id="images" class="tab-pane">
        <div class="row">
          <div class="col-xl-3 col-lg-3 col-md-3"></div>
          <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
            <div class="card card-small" style="padding: 27px;">
              <div class="ui-block-title">
                <h6 class="title">
                  Thư viện ảnh của {{vm.currentUser.UserName}}
                </h6>
                <!-- <div class="block-btn">
                  <a href="" class="btn btn-md-2" style="font-size: 11px !important;" ng-click="vm.OpenCreateAlbum()">
                    Tạo Album +
                  </a>
                </div> -->
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <!-- <div class="col-xl-3 col-lg-3 col-md-3 pb-4"">
            <div class="photo-album-item create-album">
              <a href="" class="full-block"></a>
              <div class="content">
                <a href="" class="btn btn-control">
                  <i class="fa fa-plus-square-o"></i>
                </a>
                <a href="" class="title">
                  <h5>Tạo Album</h5>
                </a>
                <span class="sub-title">Nó chỉ mất vài phút</span>
              </div>
            </div>
          </div> -->
          <div class="col-xl-3 col-lg-3 col-md-3" ng-repeat="ablum in vm.Ablums track by $index">
            <div class="photo-album-item" ng-click="vm.OpenAlbumPhoto(ablum.Id)" style="cursor: pointer;">
              <div class="photo-item">
                <img src="{{ablum.ImagePath[0]}}" alt="" height="222" style="width: 100%;">
              </div>
              <div class="content content-img">
                <a href="" class="title">
                  <h5>{{ablum.Title}}</h5>
                  <span class="sub-title">Đã thêm: {{ablum.CreatedTime | date:'dd-MM-yyyy h:mma'}}</span>
                </a>
                <div class="swiper-slide">
                  {{ablum.ImagePath.length}} Mục
                  <!-- <ul class="friends-harmonic">
                    <li>
                      <a href="">
                        <img src="../images/linh.jpg" alt="">
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <img src="../images/linh.jpg" alt="">
                      </a>
                    </li>
                    <li>
                      <a href="">
                        <img src="../images/linh.jpg" alt="">
                      </a>
                    </li>
                  </ul> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="friends" class="tab-pane">
        <div class="row">
          <div class="col-xl-3 col-lg-3 col-md-3"></div>
          <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
            <div class="card card-small" style="padding: 27px;">
              <div class="ui-block-title">
                <h6 class="title">
                  Bạn bè của {{vm.currentUser.UserName}}({{vm.friends.length}})
                </h6>
                <form action="" class="formSearch">
                  <div class="form-group" style="position: relative;    margin: 0px;">
                    <input type="text" class="form-control" placeholder="Tìm kiếm bạn bè..." style="width: 100%;" ng-model="searchFriend">
                    <button>
                      <i class="fa fa-search"></i>
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col col-xl-3 col-lg-3 col-md-3 col-sm-6 col-12" ng-repeat="friend in vm.friends | filter: searchFriend">
            <div class="ui-block">
              <div class="friend-item">
                <div class="friend-header-thumb">
                  <img src="{{friend.Follower.CoverImage}}" alt="" height="94">
                </div>
                <div class="friend-item-content">
                  <div class="more">
                    <i class="fa fa-ellipsis-h" style="color: #888da8;"></i>
                    <ul class="more-dropdown">
                      <li>
                        <a href="">Hủy kết bạn</a>
                      </li>
                      <li>
                        <a href="">Tắt thông báo</a>
                      </li>
                    </ul>
                  </div>
                  <div class="friend-avatar">
                    <div class="author-thumb">
                      <img src="{{friend.Follower.Avatar}}" alt="">
                    </div>
                    <div class="author-content">
                      <a href="profile/{{friend.Follower.FollowerId}}">
                        <h5>{{friend.Follower.FollowerName}}</h5>
                      </a>
                      <div class="country">
                        HCM,VN
                      </div>
                    </div>
                  </div>
                  <div class="swiper-container">
                    <div class="swiper-slide">
                      <div class="friend-count">
                        <a href="" class="friend-count-item">
                          <h6>52</h6>
                          <div class="title">friends</div>
                        </a>
                        <a href="" class="friend-count-item">
                          <h6>1000</h6>
                          <div class="title">photos</div>
                        </a>
                        <a href="" class="friend-count-item">
                          <h6>2</h6>
                          <div class="title">videos</div>
                        </a>
                      </div>
                      <div class="control-block-button">
                        <a href="" class="btn btn-control bg-blue" style="font-size: 20px !important;">
                          <i class="fa fa-smile-o"></i>
                        </a>
                        <a href="" class="btn btn-control bg-purple" style="font-size: 20px !important;">
                          <i class="fa fa-comments-o"></i>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- dialog -->
<script type="text/ng-template" id="OpenPost.html">
  <div class="model-content">
    <div class="modal-header">
      <h3>Bài Viết Mới</h3>
      <button type="button" ng-click="vm.cancel()">
        <span>x</span>
      </button>
    </div>
    <div class="modal-body">
      <textarea name="share" placeholder="Mô tả..." ng-model="vm.content"></textarea>
      <div class="row" style="margin-top:15px !important">
        <div class="col-6" ng-file-upload>
          <label for="filepost" style="left: 15px;">
            <i class="fa fa-file-photo-o"></i>
          </label>
          <input type="file" id="filepost" style="display:none !important" multiple="true" ng-model="vm.images" accept="image/*"
          onchange="angular.element(this).scope().SelectFile(event)" ng-max-height="6">
          <label for="filepost" class="upload-image" >Tải hình lên</label>
        </div>
        <div class="col-6 pl-4">
          <label for="hashtagPost" style="padding-left: 10px;">
            <i class="fa fa-hashtag"></i>
          </label>
          <input type="text" placeholder="Nhập tìm kiếm tag" id="hashtagPost">
          <!-- <ul class="dropdown-menu"> -->
        </div>
      </div>
      <ol style="padding: 0px;margin-top: 20px !important;list-style-type: none;" class="row">
        <li ng-repeat="img in vm.PreviewImage track by $index" class="col-4 mb-5">
          <img ng-src="{{img}}" width="100%" ng-click="vm.ZoomImage(img)" style="cursor:pointer;">
        </li>
      </ol>
    </div>
    <div class="modal-footer d-flex align-items-center">
      <div class="mr-auto">
        <a href="#" class="text-link">
          <i class="fa fa-map-marker"></i>
          Thêm vị trí
        </a>
      </div>
      <button type="button" class="btn btn-post btn-sm" ng-disabled="vm.PreviewImage==null" ng-click="vm.CreatePost()">Đăng</button>
    </div>
  </div>
  <div class="picModal" ng-show="vm.myZoom" ng-click="vm.closeZoomFunct()">
    <span class="closePic" ng-click="vm.closeZoomFunct()">&times</span>
    <img class="zoomPic" ng-src="{{vm.zoomImg}}">
  </div>
</script>

<!-- edit profile -->
<script type="text/ng-template" id="OpenEditProfile.html">
  <div class="model-content">
    <div class="modal-header">
      <h3>Chỉnh Sửa Trang Cá Nhân</h3>
      <button type="button" ng-click="vm.cancel()">
        <span>x</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="profile-avatar">
        <div class="title d-flex justify-content-between">
          <span>Ảnh đại diện</span>
          <a ng-click="vm.EditAvatar()">Chỉnh sửa</a>
        </div>
        <div class="content">
          <img src="{{vm.detail.Avatar}}" height="168px" width="168px">
        </div>
      </div>
      <div class="profile-coverImage">
        <div class="title d-flex justify-content-between">
          <span>Ảnh bìa</span>
          <a ng-click="vm.EditCover()">Chỉnh sửa</a>
        </div>
        <div class="content">
          <img src="{{vm.detail.CoverImage}}" height="150px" width="300px">
        </div>
      </div>
      <div class="profile-about">
        <div class="title d-flex justify-content-between">
          <span>Tiểu sử</span>
          <a ng-click="vm.EditAbout()">Chỉnh sửa</a>
        </div>
        <div class="content">
          <span class="text-dark" ng-show="!vm.isShowEditAbout">{{vm.detail.About}}</span>
          <textarea class="text-dark w-50" ng-show="vm.isShowEditAbout" rows="3" ng-model="vm.About"></textarea>
          <div class="mt-3" ng-show="vm.isShowEditAbout">
            <button class="btn CancelBtn" ng-click="vm.isShowEditAbout = false">Hủy<button>
            <button class="btn saveBtn" ng-click="vm.SubmitUpdateAbout()" ng-disabled="vm.About == vm.currentUser.About">Lưu</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</script>

<!-- edit avatar -->
<script type="text/ng-template" id="OpenEditAvatar.html">
  <div class="model-content">
    <div class="modal-header">
      <h3>Chỉnh Sửa Ảnh Đại Diện</h3>
      <button type="button" ng-click="vm.cancel()">
        <span>x</span>
      </button>
    </div>
    <div class="modal-body" style="text-align: center;">
      <div class="profile-avatar row">
        <div class="col-6" ng-file-upload>
          <label for="filepost">
            <i class="fa fa-file-photo-o"></i>
          </label>
          <input type="file" id="filepost" style="display:none !important" ng-model="vm.images" accept="image/*"
          onchange="angular.element(this).scope().SelectFile(event)">
          <label for="filepost" class="upload-image" >Tải hình lên</label>
        </div>
      </div>
      <img ng-src="{{vm.PreviewImage}}" ng-click="vm.ZoomImage(vm.PreviewImage)" style="cursor:pointer;">
      <form>
        <input type="submit" value="Lưu" style="" class="mt-4" ng-click="vm.SubmitAvatarProfile()" ng-disabled="vm.PreviewImage == vm.currentUser.Avatar">
      </form>
    </div>
  </div>
</script>

<!-- edit cover  -->
<script type="text/ng-template" id="OpenEditCover.html">
  <div class="model-content">
    <div class="modal-header">
      <h3>Chỉnh Sửa Bìa</h3>
      <button type="button" ng-click="vm.cancel()">
        <span>x</span>
      </button>
    </div>
    <div class="modal-body" style="text-align: center;">
      <div class="profile-avatar row">
        <div class="col-6" ng-file-upload>
          <label for="filepost">
            <i class="fa fa-file-photo-o"></i>
          </label>
          <input type="file" id="filepost" style="display:none !important" ng-model="vm.images" accept="image/*"
          onchange="angular.element(this).scope().SelectFile(event)">
          <label for="filepost" class="upload-image" >Tải hình lên</label>
        </div>
      </div>
      <img ng-src="{{vm.PreviewImage}}" ng-click="vm.ZoomImage(vm.PreviewImage)" style="cursor:pointer;width: 300px;border-radius: 0px;">
      <form>
        <input type="submit" value="Lưu" style="" class="mt-4" ng-click="vm.SubmitCoverProfile()" ng-disabled="vm.PreviewImage == vm.currentUser.CoverImage">
      </form>
    </div>
  </div>
</script>

<!-- open slide -->
<script type="text/ng-template" id="OpenSlide.html">
  <div class="model-content" style="overflow:hidden">
      <mk-slides showing-time="1500" on-exit="vm.cancel()">
        <mk-slide  ng-repeat="image in vm.post.ImagePath track by $index" url="{{image}}"></mk-slide>
      </mk-slides>
    </div>
  </div>
</script>
<!-- open ablum slide -->
<script type="text/ng-template" id="OpenAblumPhoto.html">
  <div class="model-content" style="overflow:hidden">
      <mk-slides showing-time="1500" on-exit="vm.cancel()">
        <mk-slide  ng-repeat="image in vm.album.ImagePath track by $index" url="{{image}}"></mk-slide>
      </mk-slides>
    </div>
  </div>
</script>

